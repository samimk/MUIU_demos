<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popunjavanje nedostajućih vrijednosti - Demo</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide Icons as SVG components
        const AlertCircle = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        );

        const CheckCircle = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        );

        const XCircle = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const Info = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const MissingValuesDemo = () => {
            const [selectedMethod, setSelectedMethod] = useState('original');

            const originalData = [
                { id: 1, age: 25, income: 45000, education: 'BSc', experience: 2, employed: 'Yes' },
                { id: 2, age: null, income: 52000, education: 'MSc', experience: 5, employed: 'Yes' },
                { id: 3, age: 35, income: null, education: 'BSc', experience: 8, employed: 'Yes' },
                { id: 4, age: 42, income: 78000, education: null, experience: 15, employed: 'Yes' },
                { id: 5, age: 28, income: 48000, education: 'BSc', experience: null, employed: 'No' },
                { id: 6, age: null, income: null, education: 'PhD', experience: 3, employed: 'Yes' },
                { id: 7, age: 38, income: 65000, education: 'MSc', experience: 12, employed: null },
                { id: 8, age: 31, income: 54000, education: null, experience: 7, employed: 'Yes' },
                { id: 9, age: null, income: 71000, education: 'PhD', experience: null, employed: 'Yes' },
                { id: 10, age: 45, income: null, education: 'MSc', experience: 18, employed: 'No' },
                { id: 11, age: 29, income: 49000, education: 'BSc', experience: 4, employed: null },
                { id: 12, age: 36, income: 62000, education: null, experience: 10, employed: 'Yes' },
                { id: 13, age: null, income: 55000, education: 'MSc', experience: 6, employed: 'Yes' },
                { id: 14, age: 40, income: 70000, education: 'PhD', experience: null, employed: 'Yes' },
                { id: 15, age: 27, income: null, education: 'BSc', experience: 3, employed: 'No' },
            ];

            const ages = originalData.filter(d => d.age !== null).map(d => d.age);
            const incomes = originalData.filter(d => d.income !== null).map(d => d.income);
            const experiences = originalData.filter(d => d.experience !== null).map(d => d.experience);
            
            const meanAge = Math.round(ages.reduce((a, b) => a + b, 0) / ages.length);
            const meanIncome = Math.round(incomes.reduce((a, b) => a + b, 0) / incomes.length);
            const meanExperience = Math.round(experiences.reduce((a, b) => a + b, 0) / experiences.length);
            
            const medianAge = Math.round([...ages].sort((a, b) => a - b)[Math.floor(ages.length / 2)]);
            const medianIncome = Math.round([...incomes].sort((a, b) => a - b)[Math.floor(incomes.length / 2)]);
            
            const educations = originalData.filter(d => d.education !== null).map(d => d.education);
            const modeEducation = educations.sort((a,b) =>
                educations.filter(v => v===a).length - educations.filter(v => v===b).length
            ).pop();
            
            const employedValues = originalData.filter(d => d.employed !== null).map(d => d.employed);
            const modeEmployed = employedValues.sort((a,b) =>
                employedValues.filter(v => v===a).length - employedValues.filter(v => v===b).length
            ).pop();

            const meanFilledData = originalData.map(row => ({
                ...row,
                age: row.age === null ? meanAge : row.age,
                income: row.income === null ? meanIncome : row.income,
                experience: row.experience === null ? meanExperience : row.experience,
                education: row.education === null ? modeEducation : row.education,
                employed: row.employed === null ? modeEmployed : row.employed,
            }));

            const medianFilledData = originalData.map(row => ({
                ...row,
                age: row.age === null ? medianAge : row.age,
                income: row.income === null ? medianIncome : row.income,
                experience: row.experience === null ? meanExperience : row.experience,
                education: row.education === null ? modeEducation : row.education,
                employed: row.employed === null ? modeEmployed : row.employed,
            }));

            const constantFilledData = originalData.map(row => ({
                ...row,
                age: row.age === null ? -999 : row.age,
                income: row.income === null ? -999 : row.income,
                experience: row.experience === null ? -999 : row.experience,
                education: row.education === null ? 'Unknown' : row.education,
                employed: row.employed === null ? 'Unknown' : row.employed,
            }));

            const dropRowsData = originalData.filter(row => 
                row.age !== null && row.income !== null && row.education !== null && 
                row.experience !== null && row.employed !== null
            );

            const getData = () => {
                switch(selectedMethod) {
                    case 'original': return originalData;
                    case 'mean': return meanFilledData;
                    case 'median': return medianFilledData;
                    case 'constant': return constantFilledData;
                    case 'drop': return dropRowsData;
                    default: return originalData;
                }
            };

            const isModified = (rowId, field) => {
                const original = originalData.find(r => r.id === rowId);
                return original[field] === null;
            };

            const methods = [
                { 
                    id: 'original', 
                    name: 'Originalni podaci', 
                    icon: AlertCircle,
                    color: 'red',
                    description: 'Dataset sa nedostajućim vrijednostima'
                },
                { 
                    id: 'mean', 
                    name: 'Mean Imputation', 
                    icon: CheckCircle,
                    color: 'blue',
                    description: `Age: ${meanAge}, Income: ${Math.round(meanIncome/1000)}K, Exp: ${meanExperience}, Edu: ${modeEducation}, Emp: ${modeEmployed}`
                },
                { 
                    id: 'median', 
                    name: 'Median Imputation', 
                    icon: CheckCircle,
                    color: 'green',
                    description: `Age: ${medianAge}, Income: ${Math.round(medianIncome/1000)}K, Exp: ${meanExperience}, Edu: ${modeEducation}, Emp: ${modeEmployed}`
                },
                { 
                    id: 'constant', 
                    name: 'Constant Imputation', 
                    icon: XCircle,
                    color: 'orange',
                    description: 'Numerički: -999, Kategorički: "Unknown"'
                },
                { 
                    id: 'drop', 
                    name: 'Drop Rows', 
                    icon: XCircle,
                    color: 'purple',
                    description: `Odbačeno ${originalData.length - dropRowsData.length} od ${originalData.length} redova (${Math.round((originalData.length - dropRowsData.length)/originalData.length*100)}%)`
                },
            ];

            const currentData = getData();

            const missingStats = {
                age: originalData.filter(d => d.age === null).length,
                income: originalData.filter(d => d.income === null).length,
                education: originalData.filter(d => d.education === null).length,
                experience: originalData.filter(d => d.experience === null).length,
                employed: originalData.filter(d => d.employed === null).length,
            };

            const totalCells = originalData.length * 5;
            const totalMissing = Object.values(missingStats).reduce((a, b) => a + b, 0);
            const missingPercentage = ((totalMissing / totalCells) * 100).toFixed(1);

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">
                                Popunjavanje nedostajućih vrijednosti
                            </h1>
                            <p className="text-gray-600">
                                Demonstracija različitih metoda imputation na datasetu o zapošljavanju
                            </p>
                            
                            <div className="mt-4 grid grid-cols-6 gap-3">
                                <div className="bg-red-50 rounded-lg p-3 border border-red-200">
                                    <p className="text-xs text-red-600 font-semibold">Ukupno missing</p>
                                    <p className="text-2xl font-bold text-red-700">{totalMissing}</p>
                                    <p className="text-xs text-red-600">{missingPercentage}% podataka</p>
                                </div>
                                <div className="bg-blue-50 rounded-lg p-3 border border-blue-200">
                                    <p className="text-xs text-blue-600 font-semibold">Age</p>
                                    <p className="text-2xl font-bold text-blue-700">{missingStats.age}</p>
                                    <p className="text-xs text-blue-600">{((missingStats.age/originalData.length)*100).toFixed(0)}% missing</p>
                                </div>
                                <div className="bg-green-50 rounded-lg p-3 border border-green-200">
                                    <p className="text-xs text-green-600 font-semibold">Income</p>
                                    <p className="text-2xl font-bold text-green-700">{missingStats.income}</p>
                                    <p className="text-xs text-green-600">{((missingStats.income/originalData.length)*100).toFixed(0)}% missing</p>
                                </div>
                                <div className="bg-purple-50 rounded-lg p-3 border border-purple-200">
                                    <p className="text-xs text-purple-600 font-semibold">Education</p>
                                    <p className="text-2xl font-bold text-purple-700">{missingStats.education}</p>
                                    <p className="text-xs text-purple-600">{((missingStats.education/originalData.length)*100).toFixed(0)}% missing</p>
                                </div>
                                <div className="bg-orange-50 rounded-lg p-3 border border-orange-200">
                                    <p className="text-xs text-orange-600 font-semibold">Experience</p>
                                    <p className="text-2xl font-bold text-orange-700">{missingStats.experience}</p>
                                    <p className="text-xs text-orange-600">{((missingStats.experience/originalData.length)*100).toFixed(0)}% missing</p>
                                </div>
                                <div className="bg-indigo-50 rounded-lg p-3 border border-indigo-200">
                                    <p className="text-xs text-indigo-600 font-semibold">Employed</p>
                                    <p className="text-2xl font-bold text-indigo-700">{missingStats.employed}</p>
                                    <p className="text-xs text-indigo-600">{((missingStats.employed/originalData.length)*100).toFixed(0)}% missing</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                            <h2 className="text-xl font-bold text-gray-800 mb-4">Odaberite metodu:</h2>
                            <div className="grid grid-cols-1 md:grid-cols-5 gap-4">
                                {methods.map(method => {
                                    const Icon = method.icon;
                                    const isSelected = selectedMethod === method.id;
                                    const colorClasses = {
                                        red: 'border-red-500 bg-red-50 text-red-600',
                                        blue: 'border-blue-500 bg-blue-50 text-blue-600',
                                        green: 'border-green-500 bg-green-50 text-green-600',
                                        orange: 'border-orange-500 bg-orange-50 text-orange-600',
                                        purple: 'border-purple-500 bg-purple-50 text-purple-600',
                                    };
                                    
                                    return (
                                        <button
                                            key={method.id}
                                            onClick={() => setSelectedMethod(method.id)}
                                            className={`p-4 rounded-lg border-2 transition-all text-left ${
                                                isSelected
                                                    ? colorClasses[method.color] + ' shadow-lg'
                                                    : 'border-gray-200 bg-white hover:border-gray-300 hover:shadow-md'
                                            }`}
                                        >
                                            <div className="flex items-center gap-2 mb-2">
                                                <Icon />
                                                <span className="font-semibold text-sm">
                                                    {method.name}
                                                </span>
                                            </div>
                                            <p className="text-xs opacity-80">
                                                {method.description}
                                            </p>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead className="bg-gradient-to-r from-slate-700 to-slate-800 text-white">
                                        <tr>
                                            <th className="px-4 py-3 text-left text-sm font-semibold">ID</th>
                                            <th className="px-4 py-3 text-left text-sm font-semibold">Age</th>
                                            <th className="px-4 py-3 text-left text-sm font-semibold">Income (€)</th>
                                            <th className="px-4 py-3 text-left text-sm font-semibold">Education</th>
                                            <th className="px-4 py-3 text-left text-sm font-semibold">Experience (yrs)</th>
                                            <th className="px-4 py-3 text-left text-sm font-semibold">Employed</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {currentData.map((row, idx) => (
                                            <tr 
                                                key={row.id} 
                                                className={idx % 2 === 0 ? 'bg-gray-50' : 'bg-white'}
                                            >
                                                <td className="px-4 py-3 text-sm font-medium text-gray-900">{row.id}</td>
                                                <td className={`px-4 py-3 text-sm ${
                                                    selectedMethod !== 'original' && isModified(row.id, 'age')
                                                        ? 'bg-yellow-100 font-semibold text-yellow-900'
                                                        : row.age === null 
                                                        ? 'text-red-500 font-semibold'
                                                        : 'text-gray-900'
                                                }`}>
                                                    {row.age === null ? '—' : row.age}
                                                </td>
                                                <td className={`px-4 py-3 text-sm ${
                                                    selectedMethod !== 'original' && isModified(row.id, 'income')
                                                        ? 'bg-yellow-100 font-semibold text-yellow-900'
                                                        : row.income === null
                                                        ? 'text-red-500 font-semibold'
                                                        : 'text-gray-900'
                                                }`}>
                                                    {row.income === null ? '—' : row.income.toLocaleString()}
                                                </td>
                                                <td className={`px-4 py-3 text-sm ${
                                                    selectedMethod !== 'original' && isModified(row.id, 'education')
                                                        ? 'bg-yellow-100 font-semibold text-yellow-900'
                                                        : row.education === null
                                                        ? 'text-red-500 font-semibold'
                                                        : 'text-gray-900'
                                                }`}>
                                                    {row.education === null ? '—' : row.education}
                                                </td>
                                                <td className={`px-4 py-3 text-sm ${
                                                    selectedMethod !== 'original' && isModified(row.id, 'experience')
                                                        ? 'bg-yellow-100 font-semibold text-yellow-900'
                                                        : row.experience === null
                                                        ? 'text-red-500 font-semibold'
                                                        : 'text-gray-900'
                                                }`}>
                                                    {row.experience === null ? '—' : row.experience}
                                                </td>
                                                <td className={`px-4 py-3 text-sm ${
                                                    selectedMethod !== 'original' && isModified(row.id, 'employed')
                                                        ? 'bg-yellow-100 font-semibold text-yellow-900'
                                                        : row.employed === null
                                                        ? 'text-red-500 font-semibold'
                                                        : 'text-gray-900'
                                                }`}>
                                                    {row.employed === null ? '—' : row.employed}
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div className="mt-6 bg-white rounded-xl shadow-lg p-6">
                            <div className="flex items-start gap-2">
                                <Info />
                                <div>
                                    <p className="font-semibold text-gray-800 mb-2">Legenda:</p>
                                    <div className="flex gap-6 text-sm">
                                        <div className="flex items-center gap-2">
                                            <span className="text-red-500 font-bold">—</span>
                                            <span className="text-gray-600">Nedostajuća vrijednost</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span className="bg-yellow-100 px-2 py-1 rounded text-yellow-900 font-semibold">42</span>
                                            <span className="text-gray-600">Popunjena vrijednost</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="mt-6 text-center text-gray-500 text-sm">
                            <p>Mašinsko učenje i inteligentno upravljanje | Red. prof. dr Samim Konjicija</p>
                            <p className="mt-1">Sarajevo, 2025. godine</p>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MissingValuesDemo />);
    </script>
</body>
</html>